cmake_minimum_required(VERSION 3.4)
project(ggCaller)
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -fconcepts -march=native")
set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} -O0")

set(CMAKE_C_FLAGS_DEBUG "${CMAKE_C_FLAGS_DEBUG} -O0")


set(CMAKE_VERBOSE_MAKEFILE ON)

find_package(OpenMP)
find_package(Boost)
find_library(pthread REQUIRED)
find_library(z REQUIRED)
find_library(bifrost REQUIRED)
find_package(SeqAn3 REQUIRED HINTS "${CMAKE_SOURCE_DIR}/seqan3/build_system")

#find_package(pybind11 REQUIRED)
#pybind11_add_module(ggCaller src/call_ORFs.cpp src/ggCaller_bindings.cpp src/indexing.cpp src/match_string.cpp src/traversal.cpp src/unitigDict.cpp)

add_executable(ggCaller src/main.cpp src/call_ORFs.cpp src/indexing.cpp src/match_string.cpp src/traversal.cpp src/unitigDict.cpp src/gene_overlap.cpp)

target_link_libraries(ggCaller PRIVATE seqan3::seqan3 pthread z bifrost ${MY_LIBRARIES})

if(OpenMP_CXX_FOUND)
    target_link_libraries(ggCaller PRIVATE OpenMP::OpenMP_CXX)
endif()